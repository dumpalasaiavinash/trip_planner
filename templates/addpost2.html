{% extends 'basein.html' %}
{% load staticfiles %}
{% load static %}

{% block extrahead %}
<style>
  @import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css);
  @import url("https://fonts.googleapis.com/css?family=Roboto");

  h2 {
    font-family: "Roboto", sans-serif;
    font-size: 26px;
    line-height: 1;
    color: #1a73e8;
    margin-bottom: 0;
  }

  p {
    font-family: "Roboto", sans-serif;
    font-size: 18px;
    color: #5f6982;
  }

  .uploader {
    display: block;
    clear: both;
    margin: 0 auto;
    width: 100%;
    max-width: 600px;
  }
  .uploader label {
    float: left;
    clear: both;
    width: 100%;
    padding: 1rem 1.5rem;
    text-align: center;
    background: #fff;
    border-radius: 7px;
    border: 3px solid #eee;
    -webkit-transition: all .2s ease;
    transition: all .2s ease;
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
  }
  .uploader label:hover {
    border-color: #1a73e8;
  }
  .uploader label.hover {
    border: 3px solid #1a73e8;
    box-shadow: inset 0 0 0 6px #eee;
  }
  .uploader label.hover #start i.fa {
    -webkit-transform: scale(0.8);
            transform: scale(0.8);
    opacity: 0.3;
  }
  .uploader #start {
    float: left;
    clear: both;
    width: 100%;
  }
  .uploader #start.hidden {
    display: none;
  }
  .uploader #start i.fa {
    font-size: 50px;
    margin-bottom: 1rem;
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
  }
  .uploader #response {
    float: left;
    clear: both;
    width: 100%;
  }
  .uploader #response.hidden {
    display: none;
  }
  .uploader #response #messages {
    margin-bottom: -5%;
  }
  .uploader #file-image {
    display: inline;
    margin: 0 auto .5rem auto;
    width: auto;
    height: auto;
    max-width: 180px;
  }
  .uploader #file-image.hidden {
    display: none;
  }
  .uploader #notimage {
    display: block;
    float: left;
    clear: both;
    width: 100%;
  }
  .uploader #notimage.hidden {
    display: none;
  }
  .uploader progress,
  .uploader .progress {
    display: inline;
    clear: both;
    margin-bottom: -5%;
    margin-top: -5%;
    width: 100%;
    max-width: 180px;
    height: 8px;
    border: 0;
    border-radius: 4px;
    background-color: #eee;
    overflow: hidden;
  }
  .uploader .progress[value]::-webkit-progress-bar {
    border-radius: 4px;
    background-color: #eee;
  }
  .uploader .progress[value]::-webkit-progress-value {
    background: -webkit-gradient(linear, left top, right top, from(#393f90), color-stop(50%, #1a73e8));
    background: linear-gradient(to right, #393f90 0%, #1a73e8 50%);
    border-radius: 4px;
  }
  .uploader .progress[value]::-moz-progress-bar {
    background: linear-gradient(to right, #393f90 0%, #1a73e8 50%);
    border-radius: 4px;
  }
  .uploader input[type="file"] {
    display: none;
  }
  .uploader div {
    margin: 0 0 .5rem 0;
    color: #5f6982;
  }
  .uploader .btn1 {
    display: inline-block;
    /* margin: .5rem .5rem 1rem 1rem; */
    clear: both;
    font-family: inherit;
    font-weight: 700;
    font-size: 14px;
    text-decoration: none;
    text-transform: initial;
    border: none;
    border-radius: .2rem;
    outline: none;
    padding: 0 1rem;
    height: 40px;
    line-height: 40px;
    color: #fff;
    -webkit-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
    box-sizing: border-box;
    background: #ffb400;
    border-color: #1a73e8;
    cursor: pointer;
  }
  #over {
    position:absolute;
  width: 100%;
  height: 100vh;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.5);
  z-index: 0;
  }
/*


.card-body
{
    box-shadow: 0 3px 5px gray;
}










.btn
{
    border-radius: 25px;
    box-shadow: 0 3px 4px #8abfff;
    background-image: linear-gradient(to right, #79a1ff, #1352e6, #79a1ff);
    background-size: 200%;
    width: 250px;
    border: none;
    outline: none;
    transition: .2s ease-in-out;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
}

.btn:hover
{
    background-position: right;
}



.btn:focus, .btn:active, .btn:active:focus {
    outline: none !important;
    box-shadow: 0 3px 4px #8abfff !important;
  }

  .forgot
  {
      font-size: 12px;
      color: #0073ff;
      cursor: pointer;
  } */
  .my_place
  {
      position: absolute;
      pointer-events: none;
      top: 25px;
      left: 5px;
      color: #0073ff;
      transition:  0.2s ease all;
  }
  .form-group
  {
      position: relative;
  }
  .my_form-control
  {
      width: 160%;
      padding: 8px;
      padding-top: 18px;
      border: none;
      border-bottom: 1pt solid #bfbfbf;
      transition: all 200ms ease-in-out;
  }
  .my_form-control:focus
  {
      width: 160%;
      padding: 8px;
      padding-top: 18px;
      border: none;
      border-bottom: 2px solid #0073ff;
      outline: none;
  }
  input:focus ~ .my_place,
  input:not(:focus):valid ~ .my_place
  {
      top: -6px;
  }
  .ui-input-container {
  background-color: #fff;
  padding: 1rem;
  border-radius: 4px;
}
.ui-form-input-container {
  position: relative;
  font-size: 0.9rem;
  margin-bottom: 2px;
  display: block;
}
.ui-form-input {
  padding: 13px 15px;
  border-radius: 8px;
  border: 2px solid #999999;
  outline: 0;
  width: 100%;
  transition: all 500ms ease-in-out;
}
.ui-form-input:focus{
  border-color: #1a73e8;
}
.form-input-label {
  position: absolute;
  top: -13px;
  left: 10px;
  color: #1a73e8;
  font-size: 1.1rem;
  padding-right: 0.33rem;
  padding-left: 0.33rem;
  background: #fff;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: sans-serif;
  text-transform: capitalize;
}

.ui-form-btn {
  padding: 0.5rem 1rem;
  border-radius: .2rem;
  background: #ffb400;
  outline: 0;
  width: 30%;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  color: white;
  font-weight: 500;
  margin-left:65%;
  margin-bottom: 5%;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)
}

textarea {
  min-height: 6em;
  max-height: 55vh;
  width: 100%;
}
.custom {
  opacity: 0;
  position: relative;
}

.custom + label {
  display: -webkit-box;
  display: flex;
  -webkit-box-align: center;
          align-items: center;
  cursor: pointer;
  position: relative;
}

.custom[type="checkbox"] + label::before {
  content: "";
  width: 1.4em;
  height: 1.4em;
  border: 1px solid rgba(0, 0, 0, 0.2);
  margin-right: 0.3em;
  border-radius: 6px;
  background-color: transparent;
  -webkit-transition: background 300ms ease-in;
  transition: background 300ms ease-in;
}

.custom[type="checkbox"] + label::after {
  content: "\2713";
  color: white;
  position: absolute;
  left: 5px;
  -webkit-transform: scale(0);
          transform: scale(0);
  -webkit-transition: all 300ms ease-in-out;
  transition: all 300ms ease-in-out;
}

.custom[type="checkbox"]:checked + label::after {
  -webkit-transform: scale(1.2);
          transform: scale(1.2);
}

.custom[type="checkbox"]:checked + label::before {
  background-color: #1a73e8;
}
.list li{
  list-style-type: none;
  margin-left:-13%;
  margin-right:20%;
  line-height:0.6;
}

</style>
{% endblock %}

{% block body %}
<div style="width:100%;height:100vh;background-size:100%;">
  <img style="width:100%;height:100vh;z-index:0" src="{% static 'addpost.jpg' %}" alt="">
  <div id="over"></div>
</div>
<div class="container">
    <div style="margin-top:-60%">
      <form action="{% url 'home:upload' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div style="width:70%;" class="row">
          <div style="background-color:white;padding:3%;border-top-left-radius:5px;border-bottom-left-radius:5px" class="col-6">
            <div class="form-group">
                <label>
                    <input type="text" id="form_user" class="my_form-control" name="title" required>
                    <small class="my_place">Title</small>
                    <div class="invalid-feedback">Please enter the above field.</div>
                </label>
            </div>
            <div class="form-group">
              <label>
                  <input type="text" id="form_user" class="my_form-control" name="image" required>
                  <small class="my_place">Image Url</small>
                  <!-- <div class="invalid-feedback">Please enter the above field.</div> -->
              </label>
          </div>


            <p>Category:</p>
            <ul style="margin-top:-6%;" class="list">
              <input type="hidden" name="check1" value=''>
              <input type="hidden" name="check2" value=''>
              <input type="hidden" name="check3" value=''>
              <input type="hidden" name="check4" value=''>
              <input type="hidden" name="check5" value=''>
              <input type="hidden" name="check6" value=''>

              <li style="float:left"><input class="custom" type="checkbox" id="check1" name='check1' value='Religious'>
              <label for="check1">Religious</label></li>
              <li style="float:left"><input class="custom" type="checkbox" id="check2" name='check2' value='Adventure'>
              <label for="check2">Adventure</label></li>
              <li style="float:left;margin-right:0%"><input class="custom" type="checkbox" id="check3" name='check3' value='Beach'>
              <label for="check3">Beach</label></li>
              <li style="float:left"><input class="custom" type="checkbox" id="check4" name='check4' value='Historical'>
              <label for="check4">Historical</label></li>
              <li style="float:left"><input class="custom" type="checkbox" id="check5" name='check5' value='Hill Station'>
              <label for="check5">Hill Station</label></li>
              <li style="float:left;margin-right:0%"><input class="custom" type="checkbox" id="check6" name='check6' value='Nature'>
              <label for="check6">Nature</label></li>
            </ul>
          </div>
          <div style="background-color:white;padding-top:3%;margin-left:-3%;border-top-right-radius:5px;border-bottom-right-radius:5px" class="col-6">
            <div class="ui-input-container">
              <label class="ui-form-input-container">
                <textarea placeholder="Describe your experience...." rows="14" cols="35" class="ui-form-input" name="description"></textarea>
                <span class="form-input-label">Message</span>
              </label>
            </div>
            <input class="btn ui-form-btn" type="submit" name="submit" value="Post">
          </div>
        </div>
      </form>
    </div>
</div>

<!-- Upload  -->
<!-- <form id="file-upload-form" class="uploader">
  <input id="file-upload" type="file" name="fileUpload" accept="image/*" />

  <label for="file-upload" id="file-drag">
    <img id="file-image" src="#" alt="Preview" class="hidden">
    <div id="start">
      <i class="fa fa-download" aria-hidden="true"></i>
      <div>Select a file or drag here</div>
      <div id="notimage" class="hidden">Please select an image</div>
      <span id="file-upload-btn" class="btn btn-primary">Select a file</span>
    </div>
    <div id="response" class="hidden">
      <div id="messages"></div>
      <progress class="progress" id="file-progress" value="0">
        <span>0</span>%
      </progress>
    </div>
  </label>
</form> -->
<br><br><br><br><br>
{% endblock %}

{% block extrajs %}
<script type="text/javascript">
  // File Upload
//
function ekUpload(){
  function Init() {

    console.log("Upload Initialised");

    var fileSelect    = document.getElementById('file-upload'),
        fileDrag      = document.getElementById('file-drag'),
        submitButton  = document.getElementById('submit-button');

    fileSelect.addEventListener('change', fileSelectHandler, false);

    // Is XHR2 available?
    var xhr = new XMLHttpRequest();
    if (xhr.upload) {
      // File Drop
      fileDrag.addEventListener('dragover', fileDragHover, false);
      fileDrag.addEventListener('dragleave', fileDragHover, false);
      fileDrag.addEventListener('drop', fileSelectHandler, false);
    }
  }

  function fileDragHover(e) {
    var fileDrag = document.getElementById('file-drag');

    e.stopPropagation();
    e.preventDefault();

    fileDrag.className = (e.type === 'dragover' ? 'hover' : 'modal-body file-upload');
  }

  function fileSelectHandler(e) {
    // Fetch FileList object
    var files = e.target.files || e.dataTransfer.files;

    // Cancel event and hover styling
    fileDragHover(e);

    // Process all File objects
    for (var i = 0, f; f = files[i]; i++) {
      parseFile(f);
      uploadFile(f);
    }
  }

  // Output
  function output(msg) {
    // Response
    var m = document.getElementById('messages');
    m.innerHTML = msg;
  }

  function parseFile(file) {

    console.log(file.name);
    output(
      '<strong>' + encodeURI(file.name) + '</strong>'
    );

    // var fileType = file.type;
    // console.log(fileType);
    var imageName = file.name;

    var isGood = (/\.(?=gif|jpg|png|jpeg)/gi).test(imageName);
    if (isGood) {
      document.getElementById('start').classList.add("hidden");
      document.getElementById('response').classList.remove("hidden");
      document.getElementById('notimage').classList.add("hidden");
      // Thumbnail Preview
      document.getElementById('file-image').classList.remove("hidden");
      document.getElementById('file-image').src = URL.createObjectURL(file);
    }
    else {
      document.getElementById('file-image').classList.add("hidden");
      document.getElementById('notimage').classList.remove("hidden");
      document.getElementById('start').classList.remove("hidden");
      document.getElementById('response').classList.add("hidden");
      document.getElementById("file-upload-form").reset();
    }
  }

  function setProgressMaxValue(e) {
    var pBar = document.getElementById('file-progress');

    if (e.lengthComputable) {
      pBar.max = e.total;
    }
  }

  function updateFileProgress(e) {
    var pBar = document.getElementById('file-progress');

    if (e.lengthComputable) {
      pBar.value = e.loaded;
    }
  }

  function uploadFile(file) {

    var xhr = new XMLHttpRequest(),
      fileInput = document.getElementById('class-roster-file'),
      pBar = document.getElementById('file-progress'),
      fileSizeLimit = 1024; // In MB
    if (xhr.upload) {
      // Check if file is less than x MB
      if (file.size <= fileSizeLimit * 1024 * 1024) {
        // Progress bar
        pBar.style.display = 'inline';
        xhr.upload.addEventListener('loadstart', setProgressMaxValue, false);
        xhr.upload.addEventListener('progress', updateFileProgress, false);

        // File received / failed
        xhr.onreadystatechange = function(e) {
          if (xhr.readyState == 4) {
            // Everything is good!

            // progress.className = (xhr.status == 200 ? "success" : "failure");
            // document.location.reload(true);
          }
        };

        // Start upload
        xhr.open('POST', document.getElementById('file-upload-form').action, true);
        xhr.setRequestHeader('X-File-Name', file.name);
        xhr.setRequestHeader('X-File-Size', file.size);
        xhr.setRequestHeader('Content-Type', 'multipart/form-data');
        xhr.send(file);
      } else {
        output('Please upload a smaller file (< ' + fileSizeLimit + ' MB).');
      }
    }
  }

  // Check for the various File API support.
  if (window.File && window.FileList && window.FileReader) {
    Init();
  } else {
    document.getElementById('file-drag').style.display = 'none';
  }
}
ekUpload();

</script>
{% endblock %}
